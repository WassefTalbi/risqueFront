<!-- Start Breadcrumbs -->
<app-breadcrumbs title="Risque & Menace" [breadcrumbItems]="breadCrumbItems"></app-breadcrumbs>
<!-- End Breadcrumbs -->

<div class="row">
    <div class="col-xl-9 col-lg-8">
        <div class="card">
            <div class="card-body">
                <div class="position-relative  mb-4">
                    <div class="ratio ratio-21x9">
                        <img src="http://localhost:1919/user/image/{{actif.logo}}" alt="" class="avatar-lg">
                        <img src="http://localhost:1919/user/image/{{actif.logo}}" alt="" class="effect">
                    </div>
                 
                </div>
                <button type="button" class="btn btn-subtle-warning custom-toggle btn-icon btn-sm active float-end" data-bs-toggle="button" aria-pressed="true">
                    <span class="icon-on"><i class="bi bi-star"></i></span>
                    <span class="icon-off"><i class="bi bi-star-fill"></i></span>
                </button>
                <h4>{{actif.nom}}</h4>
                <ul class="list-unstyled hstack gap-2 flex-wrap mb-0">
                  
                    <li>
                        <i class="bi bi-box-seam align-baseline me-1"></i> 
                        <span class="badge bg-success-subtle text-success">{{actif.categorie.nom}}</span>
                    </li>
                </ul>
            </div>
            <div class="card-body">
                <ul class="nav nav-tabs-custom rounded card-header-tabs border-bottom-0 mx-0" role="tablist">
                    <li class="nav-item" role="presentation">
                        <a class="nav-link active" data-bs-toggle="tab" href="javascript:void(0);" [class.active]="currentTab === 'description'" (click)="changeTab('description')" role="tab" aria-selected="true">
                            Risque
                        </a>
                    </li>
                    <li class="nav-item" role="presentation">
                        <a class="nav-link" data-bs-toggle="tab" href="javascript:void(0);" [class.active]="currentTab === 'videoTutorials'" (click)="changeTab('videoTutorials')" role="tab" aria-selected="false" tabindex="-1">
                            Menace & Vulnérabilité
                        </a>
                    </li>
                
                </ul>
            </div>
        </div><!--end card-->
        <div class="card">
            <div class="card-body">
                <div class="tab-content">
                    <div [hidden]="currentTab !== 'description'" class="tab-pane active" id="description" role="tabpanel">
                        <div *ngIf="!risque; else risqueDetails">
                            <button class="btn btn-secondary" (click)="addRisqueModal.show()">
                              <i class="bi bi-person-plus align-baseline me-1"></i> Ajouter Risque
                            </button>
                          </div>
                          
                          <ng-template #risqueDetails>
                            <h6 class="card-title mb-3">{{risque.nom}}</h6>
                            <ul class="list-unstyled vstack gap-2">
                              <li><i class="bi bi-caret-right"></i> Priorite : {{risque.priorite}}</li>
                              <li><i class="bi bi-caret-right"></i> Probabilite : {{risque.probabilite}}</li>
                              <li><i class="bi bi-caret-right"></i> Valeur financiere : {{risque.valeurFinanciere}}</li>
                              <li><i class="bi bi-caret-right"></i> Valeur de base impact : {{risque.valeurBaseImpact}}</li>
                            </ul>
                          </ng-template>
                    </div>
                    <div [hidden]="currentTab !== 'videoTutorials'" class="tab-pane active" id="videoTutorials" role="tabpanel">
                        <!-- START Accordions -->
                        <accordion class="accordion accordion-border-box  mt-3" [closeOthers]="true" id="accordionlefticon">
                            <accordion-group class="accordion-item">
                                <h2 accordion-heading class="accordion-header" id="accordionlefticonExample1">
                                    <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#accor_lefticonExamplecollapse1" aria-expanded="true" aria-controls="accor_lefticonExamplecollapse1">
                                        Introduction to JavaScript + Setup <small class="ms-1 align-baseline">(4
                                            Lessons)</small>
                                    </button>
                                </h2>
                                <div id="accor_lefticonExamplecollapse1" class="accordion-collapse collapse show">
                                    <div class="accordion-body">
                                        <ul class="list-group list">
                                            <li class="list-group-item position-relative">
                                                <div class="d-flex align-items-center">
                                                    <div class="flex-shrink-0 avatar-xs">
                                                        <div class="avatar-title rounded bg-danger-subtle text-danger">
                                                            <i class="bi bi-play"></i>
                                                        </div>
                                                    </div>
                                                    <div class="flex-grow-1 ms-2">
                                                        <a href="javascript:void(0);" class="stretched-link text-reset">What JavaScript
                                                            framework should I learn?</a>
                                                    </div>
                                                    <div class="flex-shrink-0">
                                                        03:20 min
                                                    </div>
                                                </div>
                                            </li>
                                            <li class="list-group-item">
                                                <div class="d-flex align-items-center">
                                                    <div class="flex-shrink-0 avatar-xs">
                                                        <div class="avatar-title rounded bg-danger-subtle text-danger">
                                                            <i class="bi bi-play"></i>
                                                        </div>
                                                    </div>
                                                    <div class="flex-grow-1 ms-2">
                                                        <a href="javascript:void(0);" class="stretched-link text-reset">What is
                                                            JavaScript for example?</a>
                                                    </div>
                                                    <div class="flex-shrink-0">
                                                        07:32 min
                                                    </div>
                                                </div>
                                            </li>
                                            <li class="list-group-item active list-group-item-action">
                                                <div class="d-flex align-items-center">
                                                    <div class="flex-shrink-0 avatar-xs">
                                                        <div class="avatar-title rounded bg-primary-subtle text-primary">
                                                            <i class="bi bi-stop-fill"></i>
                                                        </div>
                                                    </div>
                                                    <div class="flex-grow-1 ms-2">
                                                        <a href="javascript:void(0);" class="stretched-link text-reset">Which is a
                                                            framework of JavaScript?</a>
                                                    </div>
                                                    <div class="flex-shrink-0">
                                                        08:54 min
                                                    </div>
                                                </div>
                                            </li>
                                            <li class="list-group-item">
                                                <div class="d-flex align-items-center">
                                                    <div class="flex-shrink-0 avatar-xs">
                                                        <div class="avatar-title rounded bg-danger-subtle text-danger">
                                                            <i class="bi bi-play"></i>
                                                        </div>
                                                    </div>
                                                    <div class="flex-grow-1 ms-2">
                                                        <a href="javascript:void(0);" class="stretched-link text-reset">What is
                                                            JavaScript and why it is used?</a>
                                                    </div>
                                                    <div class="flex-shrink-0">
                                                        06:37 min
                                                    </div>
                                                </div>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </accordion-group>
                            <accordion-group class="accordion-item mt-2">
                                <h2 accordion-heading class="accordion-header" id="accordionlefticonExample2">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#accor_lefticonExamplecollapse2" aria-expanded="false" aria-controls="accor_lefticonExamplecollapse2">
                                        Variables in JavaScript <small class="ms-1 align-baseline">(7 Lessons)</small>
                                    </button>
                                </h2>
                                <div id="accor_lefticonExamplecollapse2" class="accordion-collapse collapse show" aria-labelledby="accordionlefticonExample2" data-bs-parent="#accordionlefticon">
                                    <div class="accordion-body">
                                        <ul class="list-group list">
                                            <li class="list-group-item position-relative">
                                                <div class="d-flex align-items-center">
                                                    <div class="flex-shrink-0 avatar-xs">
                                                        <div class="avatar-title rounded bg-danger-subtle text-danger">
                                                            <i class="bi bi-play"></i>
                                                        </div>
                                                    </div>
                                                    <div class="flex-grow-1 ms-2">
                                                        <a href="javascript:void(0);" class="stretched-link text-reset">What are the
                                                            variables in JavaScript?</a>
                                                    </div>
                                                    <div class="flex-shrink-0">
                                                        08:34 min
                                                    </div>
                                                </div>
                                            </li>
                                            <li class="list-group-item">
                                                <div class="d-flex align-items-center">
                                                    <div class="flex-shrink-0 avatar-xs">
                                                        <div class="avatar-title rounded bg-danger-subtle text-danger">
                                                            <i class="bi bi-play"></i>
                                                        </div>
                                                    </div>
                                                    <div class="flex-grow-1 ms-2">
                                                        <a href="javascript:void(0);" class="stretched-link text-reset">What is a
                                                            variable in JavaScript example?</a>
                                                    </div>
                                                    <div class="flex-shrink-0">
                                                        10:08 min
                                                    </div>
                                                </div>
                                            </li>
                                            <li class="list-group-item">
                                                <div class="d-flex align-items-center">
                                                    <div class="flex-shrink-0 avatar-xs">
                                                        <div class="avatar-title rounded bg-danger-subtle text-danger">
                                                            <i class="bi bi-play"></i>
                                                        </div>
                                                    </div>
                                                    <div class="flex-grow-1 ms-2">
                                                        <a href="javascript:void(0);" class="stretched-link text-reset">What are the
                                                            three variables in JavaScript?</a>
                                                    </div>
                                                    <div class="flex-shrink-0">
                                                        11:33 min
                                                    </div>
                                                </div>
                                            </li>
                                            <li class="list-group-item">
                                                <div class="d-flex align-items-center">
                                                    <div class="flex-shrink-0 avatar-xs">
                                                        <div class="avatar-title rounded bg-danger-subtle text-danger">
                                                            <i class="bi bi-play"></i>
                                                        </div>
                                                    </div>
                                                    <div class="flex-grow-1 ms-2">
                                                        <a href="javascript:void(0);" class="stretched-link text-reset">How to write
                                                            variables in JavaScript?</a>
                                                    </div>
                                                    <div class="flex-shrink-0">
                                                        07:31 min
                                                    </div>
                                                </div>
                                            </li>
                                            <li class="list-group-item">
                                                <div class="d-flex align-items-center">
                                                    <div class="flex-shrink-0 avatar-xs">
                                                        <div class="avatar-title rounded bg-danger-subtle text-danger">
                                                            <i class="bi bi-play"></i>
                                                        </div>
                                                    </div>
                                                    <div class="flex-grow-1 ms-2">
                                                        <a href="javascript:void(0);" class="stretched-link text-reset">What are 3 types
                                                            of variables?</a>
                                                    </div>
                                                    <div class="flex-shrink-0">
                                                        14:46 min
                                                    </div>
                                                </div>
                                            </li>
                                            <li class="list-group-item">
                                                <div class="d-flex align-items-center">
                                                    <div class="flex-shrink-0 avatar-xs">
                                                        <div class="avatar-title rounded bg-danger-subtle text-danger">
                                                            <i class="bi bi-play"></i>
                                                        </div>
                                                    </div>
                                                    <div class="flex-grow-1 ms-2">
                                                        <a href="javascript:void(0);" class="stretched-link text-reset">What is a
                                                            variable with example?</a>
                                                    </div>
                                                    <div class="flex-shrink-0">
                                                        09:33 min
                                                    </div>
                                                </div>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </accordion-group>
                            <accordion-group class="accordion-item mt-2">
                                <h2 accordion-heading class="accordion-header" id="accordionlefticonExample3">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#accor_lefticonExamplecollapse3" aria-expanded="false" aria-controls="accor_lefticonExamplecollapse3">
                                        Const, let and var in JavaScript <small class="ms-1 align-baseline">(3
                                            Lessons)</small>
                                    </button>
                                </h2>
                                <div id="accor_lefticonExamplecollapse3" class="accordion-collapse collapse show" aria-labelledby="accordionlefticonExample3" data-bs-parent="#accordionlefticon">
                                    <ul class="list-group list">
                                        <li class="list-group-item position-relative">
                                            <div class="d-flex align-items-center">
                                                <div class="flex-shrink-0 avatar-xs">
                                                    <div class="avatar-title rounded bg-danger-subtle text-danger">
                                                        <i class="bi bi-play"></i>
                                                    </div>
                                                </div>
                                                <div class="flex-grow-1 ms-2">
                                                    <a href="javascript:void(0);" class="stretched-link text-reset">What
                                                        JavaScript
                                                        framework should I learn?</a>
                                                </div>
                                                <div class="flex-shrink-0">
                                                    03:20 min
                                                </div>
                                            </div>
                                        </li>
                                        <li class="list-group-item">
                                            <div class="d-flex align-items-center">
                                                <div class="flex-shrink-0 avatar-xs">
                                                    <div class="avatar-title rounded bg-danger-subtle text-danger">
                                                        <i class="bi bi-play"></i>
                                                    </div>
                                                </div>
                                                <div class="flex-grow-1 ms-2">
                                                    <a href="javascript:void(0);" class="stretched-link text-reset">What
                                                        is JavaScript
                                                        for example?</a>
                                                </div>
                                                <div class="flex-shrink-0">
                                                    07:32 min
                                                </div>
                                            </div>
                                        </li>
                                        <li class="list-group-item">
                                            <div class="d-flex align-items-center">
                                                <div class="flex-shrink-0 avatar-xs">
                                                    <div class="avatar-title rounded bg-danger-subtle text-danger">
                                                        <i class="bi bi-play"></i>
                                                    </div>
                                                </div>
                                                <div class="flex-grow-1 ms-2">
                                                    <a href="javascript:void(0);" class="stretched-link text-reset">What
                                                        is JavaScript
                                                        and why it is used?</a>
                                                </div>
                                                <div class="flex-shrink-0">
                                                    06:37 min
                                                </div>
                                            </div>
                                        </li>
                                    </ul>
                                </div>
                            </accordion-group>
                        </accordion>
                        <!-- END Accordions -->
                    </div>
                 
                </div>
            </div>
        </div>
    </div><!--end col-->

</div><!--end row-->



<!-- Modal -->
<div bsModal #addRisqueModal="bs-modal" class="modal fade" id="addRisque">
    <div class="modal-dialog">
        <div class="modal-content border-0">
            <div class="modal-header bg-danger p-3">
                <h5 class="modal-title text-white" id="addCourseModalLabel">Ajouter Risque</h5>
                <button type="button" class="btn-close btn-close-white" (click)="addRisqueModal.hide()"></button>
            </div>

            <form (ngSubmit)="saveRisque()" [formGroup]="risqueForm" class="tablelist-form" novalidate autocomplete="off">
                <div class="modal-body">
                    <div id="alert-error-msg" class="d-none alert alert-danger py-2"></div>
                    <input type="hidden" id="id-field">

                    <input type="hidden" id="rating-field">
                    

                    <div class="mb-3">
                        <label for="actif-nom-input" class="form-label"> Risque nom<span class="text-danger">*</span></label>
                        <input type="text" id="course-title-input" formControlName="nom" class="form-control" placeholder="Enter risque nom" required>
                        <div *ngIf="risqueForm.get('nom')?.hasError('required') && risqueForm.get('nom')?.touched" class="text-danger">
                            risque nom is required.
                           </div>
                    </div>
                   

                    <div class="row">
                      
                        <div class="col-lg-6">
                            <div class="mb-3">
                                <label for="priorite-input" class="form-label">Priorite<span class="text-danger">*</span></label>
                                <input type="number" id="lessons-input" class="form-control" formControlName="priorite" placeholder="priorite" required>
                                <div *ngIf="risqueForm.get('priorite')?.hasError('required') && risqueForm.get('priorite')?.touched" class="text-danger">
                                    risque priorite is required.
                                </div>
                            </div>
                        </div><!--end col-->
                        <div class="col-lg-6">
                            <div class="mb-3">
                                <label for="probabilite-input" class="form-label">Probabilite<span class="text-danger">*</span></label>
                                <input type="number" id="probabilite-input" class="form-control" formControlName="probabilite" placeholder="valeur Données" required>
                                <div *ngIf="risqueForm.get('probabilite')?.hasError('required') && risqueForm.get('probabilite')?.touched" class="text-danger">
                                    risque probabilite  is required.
                                </div>
                            </div>
                        </div><!--end col-->
                       
                        <div class="col-lg-6">
                            <div class="mb-3">
                                <label for="financiere-input" class="form-label">Valeur Base Impact<span class="text-danger">*</span></label>
                                <div class="input-group">
                                  
                                    <input type="number" id="valeurFinanciere-input" class="form-control" formControlName="valeurBaseImpact" placeholder="valeur Base Impact" required>
                                    <div *ngIf="risqueForm.get('valeurBaseImpact')?.hasError('required') && risqueForm.get('valeurBaseImpact')?.touched" class="text-danger">
                                      valeur Base Impact is required.
                                    </div>                             
                               </div>
                            </div>
                        </div><!--end col-->
                        <div class="col-lg-6">
                        <div class="mb-3">
                            <label for="valeurFinanciere-input" class="form-label">Valeur Financiere<span class="text-danger">*</span></label>
                            <div class="input-group">
                                <span class="input-group-text">$</span>
                            <input type="number" id="valeurFinanciere-input" class="form-control" formControlName="valeurFinanciere" placeholder="valeur Financiere" required>
                            <div *ngIf="risqueForm.get('valeurFinanciere')?.hasError('required') && risqueForm.get('valeurFinanciere')?.touched" class="text-danger">
                                 valeur Financiere is required.
                            </div>
                        </div>
                        </div>
                    </div><!--end col-->
                    </div><!--end row-->
                </div>
                <div class="modal-footer">
                    <div class="hstack gap-2 justify-content-end">
                        <button type="button" class="btn btn-ghost-danger" (click)="addRisqueModal.hide()"><i class="bi bi-x-lg align-baseline me-1"></i> Close</button>
                        <button type="submit" class="btn btn-primary" id="add-btn">Ajouter Risque</button>
                    </div>
                </div>
            </form>
        </div>
        <!-- modal-content -->
    </div>
</div><!--end add Property modal-->
<!-- removeItemModal -->
<div bsModal #removeItemModal="bs-modal" id="removeItemModal" class="modal fade zoomIn">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="btn-close" (click)="removeItemModal.hide()"></button>
            </div>
            <div class="modal-body">
                <div class="text-center">
                    <div class="text-danger">
                        <i class="bi bi-trash display-4"></i>
                    </div>
                    <div class="mt-4 fs-base">
                        <h4 class="mb-1">Are you sure ?</h4>
                        <p class="text-muted mx-4 mb-0">Are you sure you want to remove this review ?</p>
                    </div>
                </div>
                <div class="d-flex gap-2 justify-content-center mt-4 mb-2">
                    <button type="button" class="btn w-sm btn-light" (click)="removeItemModal.hide()">Close</button>
                    <button type="button" class="btn w-sm btn-danger" id="remove-product" (click)="DeleteReview()">Yes,
                        Delete It!</button>
                </div>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div><!-- /.modal -->